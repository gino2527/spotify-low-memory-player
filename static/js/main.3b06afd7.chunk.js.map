{"version":3,"sources":["js/App.js","index.js"],"names":["params","client_id","response_type","redirect_uri","window","location","origin","pathname","spotifyUrl","queryString","stringify","App","props","state","access_token","artists","playing","user_type","fetchUser","bind","handleClickNextSong","handleClickPrevSong","hash","parse","slice","this","setState","axios","get","headers","Authorization","then","item","data","catch","post","setTimeout","className","Object","keys","length","Button","onClick","variant","Image","height","src","map","name","join","href","React","Component","ReactDOM","render","document","getElementById"],"mappings":"yTAcMA,G,MAAS,CACbC,UAAW,mCACXC,cAAe,QACfC,aAAa,GAAD,OAAKC,OAAOC,SAASC,QAArB,OAA8BF,OAAOC,SAASE,YAItDC,EAAU,iDAA6CC,IAAYC,UAAUV,IAmKpEW,E,YAhKb,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAEDC,MAAQ,CACXC,aAAc,GACdC,QAAS,GACTC,QAAS,GACTC,UAAW,QAGb,EAAKC,UAAY,EAAKA,UAAUC,KAAf,gBACjB,EAAKC,oBAAsB,EAAKA,oBAAoBD,KAAzB,gBAC3B,EAAKE,oBAAsB,EAAKA,oBAAoBF,KAAzB,gBAZV,E,iFAeE,IAAD,OACZG,EAAOlB,OAAOC,SAASiB,KAE7B,GAAIA,EAAM,CACR,IACQR,EADWL,IAAYc,MAAMD,EAAKE,MAAM,IACxCV,aAERW,KAAKC,SAAS,CAAEZ,iBAAgB,WAC9B,EAAKI,kB,kCAKE,IAAD,OACFJ,EAAiBW,KAAKZ,MAAtBC,aAERa,IAAMC,IACJ,uCAAwC,CACtCC,QAAS,CACPC,cAAc,UAAD,OAAYhB,MAG7BiB,MAAK,YAAe,IACZC,EADW,EAAXC,KACAD,KAER,EAAKN,SAAS,CACZX,QAASiB,EAAKjB,QACdC,QAASgB,OAEVE,OAAM,iB,4CAKY,IAAD,OACZpB,EAAiBW,KAAKZ,MAAtBC,aAERa,IAAMQ,KACJ,4CAA6C,GAAI,CAC/CN,QAAS,CACPC,cAAc,UAAD,OAAYhB,MAG7BiB,MAAK,WACLK,YAAW,WACT,EAAKlB,cACJ,U,4CAIgB,IAAD,OACZJ,EAAiBW,KAAKZ,MAAtBC,aAERa,IAAMQ,KACJ,gDAAiD,GAAI,CACnDN,QAAS,CACPC,cAAc,UAAD,OAAYhB,MAG7BiB,MAAK,WACLK,YAAW,WACT,EAAKlB,cACJ,U,+BAIG,IAAD,EAKHO,KAAKZ,MAHPC,EAFK,EAELA,aACAC,EAHK,EAGLA,QACAC,EAJK,EAILA,QAEF,OACE,yBAAKqB,UAAU,aACbvB,EASEwB,OAAOC,KAAKvB,GAASwB,OAAS,EAE1B,6BACE,kBAACC,EAAA,EAAD,CACEJ,UAAU,yBACVK,QAASjB,KAAKJ,oBACdsB,QAAQ,WAER,kBAACC,EAAA,EAAD,CACEC,OAAO,KACPC,IAAI,cAGP/B,EAAQgC,KAAI,qBAAGC,QAAiBC,KAAK,MAXxC,MAWkDjC,EAAQgC,KACxD,kBAACP,EAAA,EAAD,CACEJ,UAAU,yBACVK,QAASjB,KAAKL,oBACduB,QAAQ,WAER,kBAACC,EAAA,EAAD,CACEC,OAAO,KACPC,IAAI,eA8BV,wCA1DJ,uBACEI,KAAM1C,GADR,yB,GA5FQ2C,IAAMC,WChBxBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.3b06afd7.chunk.js","sourcesContent":["import React from 'react';\n\nimport axios from 'axios';\nimport queryString from 'query-string';\n\n// npm components\nimport {\n  Button,\n  Image\n} from 'react-bootstrap';\n\n// scss\nimport '../scss/App.scss';\n\nconst params = {\n  client_id: '21414b52ec3b448c9eff4c6de5d7048b',\n  response_type: 'token',\n  redirect_uri: `${window.location.origin}${window.location.pathname}`\n  // scope: 'user-read-currently-playing user-read-playback-state user-modify-playback-state'\n};\n\nconst spotifyUrl = `https://accounts.spotify.com/authorize?${queryString.stringify(params)}`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      access_token: '',\n      artists: [],\n      playing: {},\n      user_type: 'user'\n    };\n\n    this.fetchUser = this.fetchUser.bind(this);\n    this.handleClickNextSong = this.handleClickNextSong.bind(this);\n    this.handleClickPrevSong = this.handleClickPrevSong.bind(this);\n  }\n\n  componentDidMount() {\n    const hash = window.location.hash;\n\n    if (hash) {\n      const hashObject = queryString.parse(hash.slice(1));\n      const { access_token } = hashObject;\n\n      this.setState({ access_token }, () => {\n        this.fetchUser();\n      });\n    }\n  }\n\n  fetchUser() {\n    const { access_token } = this.state;\n\n    axios.get(\n      'https://api.spotify.com/v1/me/player', {\n        headers: {\n          Authorization: `Bearer ${access_token}`\n        }\n      }\n    ).then(({ data }) => {\n      const { item } = data;\n\n      this.setState({\n        artists: item.artists,\n        playing: item\n      });\n    }).catch(() => {\n      // window.location = '/';\n    })\n  }\n\n  handleClickNextSong() {\n    const { access_token } = this.state;\n\n    axios.post(\n      'https://api.spotify.com/v1/me/player/next', {}, {\n        headers: {\n          Authorization: `Bearer ${access_token}`\n        }\n      }\n    ).then(() => {\n      setTimeout(() => {\n        this.fetchUser();\n      }, 1000);\n    })\n  }\n\n  handleClickPrevSong() {\n    const { access_token } = this.state;\n\n    axios.post(\n      'https://api.spotify.com/v1/me/player/previous', {}, {\n        headers: {\n          Authorization: `Bearer ${access_token}`\n        }\n      }\n    ).then(() => {\n      setTimeout(() => {\n        this.fetchUser();\n      }, 1000);\n    })\n  }\n\n  render() {\n    const {\n      access_token,\n      artists,\n      playing\n    } = this.state;\n    return (\n      <div className=\"spotify-q\">\n      {!access_token\n        ? (\n          <a\n            href={spotifyUrl}\n          >\n            Login to spotify\n          </a>\n        )\n        : (\n          Object.keys(playing).length > 0\n            ? (\n              <div>\n                <Button\n                  className=\"spotify-q__button next\"\n                  onClick={this.handleClickPrevSong}\n                  variant=\"success\"\n                >\n                  <Image\n                    height=\"10\"\n                    src=\"back.svg\"\n                  />\n                </Button>\n                {artists.map(({ name }) => name).join(', ')} - {playing.name}\n                <Button\n                  className=\"spotify-q__button prev\"\n                  onClick={this.handleClickNextSong}\n                  variant=\"success\"\n                >\n                  <Image\n                    height=\"10\"\n                    src=\"next.svg\"\n                  />\n                </Button>\n                {/* <div>\n                  <input ref={(e) => { this.search = e; }}/>\n                  <button onClick={() => {\n                    const { access_token } = this.state;\n\n                    axios.get(\n                      'https://api.spotify.com/v1/search', {\n                        params: {\n                          q: this.search.value,\n                          type: 'artist'\n                        },\n                        headers: {\n                          Authorization: `Bearer ${access_token}`\n                        }\n                      }\n                    ).then(() => {\n                      setTimeout(() => {\n                        this.fetchUser();\n                      }, 1000);\n                    })\n                  }}>\n                    search\n                  </button>\n                </div> */}\n              </div>\n            )\n            : (\n              <div>\n                no song\n              </div>\n            )\n        )\n      }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport App from './js/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// import * as serviceWorker from './serviceWorker';\n// serviceWorker.register();\n"],"sourceRoot":""}